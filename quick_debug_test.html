<!DOCTYPE html>
<html>
<head>
    <title>Quick Image Upload Test</title>
</head>
<body>
    <h1>Quick Test: Image Upload with Debug</h1>
    
    <form action="road_and_infra_dept/citizen_module/api/handle_report.php" method="POST" enctype="multipart/form-data">
        <h2>Submit Test Report (Minimal)</h2>
        
        <p><strong>Required Fields:</strong></p>
        
        <div>
            <label>Location:</label>
            <input type="text" name="location" value="Debug Test Location" required style="width: 300px;">
        </div><br>
        
        <div>
            <label>Barangay:</label>
            <select name="barangay" required>
                <option value="Poblacion">Poblacion</option>
            </select>
        </div><br>
        
        <div>
            <label>Damage Type:</label>
            <select name="damage_type" required>
                <option value="pothole">Pothole</option>
            </select>
        </div><br>
        
        <div>
            <label>Severity:</label>
            <select name="severity" required>
                <option value="medium">Medium</option>
            </select>
        </div><br>
        
        <div>
            <label>Description:</label><br>
            <textarea name="description" required style="width: 300px; height: 60px;">Debug test for image upload</textarea>
        </div><br>
        
        <div>
            <label><strong>UPLOAD IMAGE:</strong></label><br>
            <input type="file" name="images[]" accept="image/*" required style="border: 2px solid red;">
        </div><br>
        
        <div>
            <label>
                <input type="checkbox" name="anonymous_report" value="1" checked>
                Submit anonymously
            </label>
        </div><br>
        
        <button type="submit" style="background: red; color: white; padding: 10px;">SUBMIT TEST REPORT</button>
    </form>
    
    <hr>
    
    <h2>What to Check After Submitting:</h2>
    <ol>
        <li><strong>Server Error Logs:</strong> Look for "=== IMAGE UPLOAD DEBUG START ==="</li>
        <li><strong>Check for:</strong>
            <ul>
                <li>"REQUEST_METHOD: POST"</li>
                <li>"CONTENT_TYPE: multipart/form-data"</li>
                <li>"FILES array: Array ( [images] => ... )"</li>
                <li>"Successfully uploaded:" or specific error messages</li>
            </ul>
        </li>
        <li><strong>If no images found:</strong> The enctype is still not working</li>
        <li><strong>If upload fails:</strong> Check directory permissions</li>
    </ol>
    
    <h2>Expected Debug Output:</h2>
    <pre style="background: #f0f0f0; padding: 10px;">
=== IMAGE UPLOAD DEBUG START ===
REQUEST_METHOD: POST
CONTENT_TYPE: multipart/form-data; boundary=...
FILES array: Array ( [images] => Array ... )
Processing 1 files
File 0: name=test.png, error=0, size=12345, tmp_name=/tmp/xxx
Successfully uploaded: DR-2025-001_0_1738761234.png
Final uploaded_images array: Array ( [0] => DR-2025-001_0_1738761234.png )
=== IMAGE UPLOAD DEBUG END ===
    </pre>
</body>
</html>
